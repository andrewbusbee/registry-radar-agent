# Registry Radar Agent

**Registry Radar Agent** is a lightweight companion application that monitors Docker containers on remote machines and reports their status to a Registry Radar server. This agent is designed to work exclusively with Registry Radar and is not a standalone application.

## What It Does

The Registry Radar Agent provides the following functionality:

- **Docker Container Monitoring**: Automatically discovers and monitors all Docker containers running on the host machine
- **Real-time Status Updates**: Reports container status changes (running, stopped, exited) to the Registry Radar server
- **Container Discovery**: Detects new containers as they are created and adds them to Registry Radar's monitoring system
- **Multi-Agent Support**: Multiple agents can run on different machines, all reporting to the same Registry Radar server
- **Automatic Enrollment**: Securely enrolls with Registry Radar using one-time enrollment tokens
- **WebSocket Communication**: Maintains persistent connection with Registry Radar for real-time updates
- **Container Tag Detection**: Properly parses Docker image names and tags (e.g., `nginx:1.21`, `postgres:13-alpine`)

## How It Works

1. **Enrollment**: Agent enrolls with Registry Radar using a one-time enrollment token
2. **Authentication**: Obtains and maintains JWT tokens for secure communication
3. **WebSocket Connection**: Establishes persistent connection with Registry Radar server
4. **Container Discovery**: Scans all Docker containers on the host machine
5. **Status Monitoring**: Continuously monitors Docker events and container status changes
6. **Data Reporting**: Sends container information to Registry Radar every 30 seconds

## Environment Variables

- `SERVER_URL` - Registry Radar server URL (e.g., `https://your-registry-radar-host`)
- `AGENT_ID` - Unique identifier for this agent instance
- `AGENT_ENROLL_TOKEN` - One-time enrollment token (obtained from Registry Radar UI)
- `REFRESH_SECRET` - Persistent refresh secret (set after enrollment)
- `AGENT_LOG_LEVEL` - Logging level (optional, defaults to `info`)

## Deployment

This agent is designed to be deployed using Docker Compose files generated by the Registry Radar web interface. Users should:

1. Go to the "Agents" tab in Registry Radar
2. Click "Add Agent" and provide a name
3. Copy the generated Docker Compose configuration
4. Deploy using the provided configuration

## Important Notes

- **Registry Radar Dependency**: This agent only works with Registry Radar and requires an active Registry Radar server
- **Not Standalone**: This is not a standalone monitoring application - it's designed to extend Registry Radar's capabilities to remote machines
- **Security**: Uses JWT tokens and enrollment tokens for secure communication with Registry Radar
- **Docker Required**: Requires Docker to be installed and accessible on the host machine

---

## License

MIT License - see LICENSE file for details.

## ðŸ¤– AI-Assisted Development

This project was built with the support of modern **AI coding tools** to accelerate prototyping and implementation.  
- AI was used to generate scaffolding, boilerplate, and draft functions.  
- All code has been **curated, reviewed, and tested** by a human before release.  
- The use of AI allowed for faster iteration and a focus on architecture, usability, and overall project quality.  

Community contributions and reviews are encouraged to further strengthen and expand the project. 



